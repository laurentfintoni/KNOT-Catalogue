$def with (user, data, count,is_git_auth,project,base,uri,name,results,map)

$var user = user
$var is_git_auth = is_git_auth
$var project = project


<!-- Resources -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<section class="row articleBox">
	<script>console.log('$uri')</script>
	<section class="col-md-8">
		$if data:
			$ label = next((result["object"]["value"] for result in data["results"]["bindings"] if result["predicate"]["value"] == "http://www.w3.org/2000/01/rdf-schema#label"), "No label")
			<h2 class="articleTitle">$label</h2>
			$if uri == base + name:
				<section class="info-item">
					<h3 class="articleSubtitle">View </h3><a href="view-$name">record</a>
				</section>
			$else:
				<section class="info-item">
					<h3 class="articleSubtitle">View </h3><a href="$uri">external link</a>
				</section>
			<section class="info-item">
					<h3 class="articleSubtitle">Permalink</h3>
					<span class="small">$uri</span>
					<p></p>
			</section>
			<section class="info-item">
				$ s = 's' if count > 1 else ''
				<h3 class="articleSubtitle">Appears in $count resource$s</h3>
				$for res_class in results:
					<section class="related-resources-container">
						$ res_class_count = len(results[res_class]['results'])
						<h4 class="articleSubtitle">$res_class ($res_class_count)</h4>
						<button class="showRes" data-count="$res_class_count" data-offset="0" data-limit="10" data-uri="$uri" data-class="$results[res_class]['class']">show</button><br>
						<section class="related-resources">
						
						</section>
					</section>
			</section>
			$if map:
				<section class="info-item map">
					<h3 class="articleSubtitle">Map</h3>
					<div id="map" style="height: 500px;"></div>
					<script>
						var map = L.map('map').setView([$map[0], $map[1]], 10);
						L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
							attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
						}).addTo(map);

						// Aggiungi un marker al punto specificato
						var marker = L.marker([$map[0], $map[1]]).addTo(map); // Cambia le coordinate con quelle desiderate

						// Aggiungi un popup al marker
						marker.bindPopup("<b>$label</b>").openPopup();
					</script>
				</section>
			
		$else:
			<h2>ooops, we don't have a page for this yet.</h2>
	</section>
	<section class="col-md-4 sideBoxes">
		$if name.startswith("Q"):
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external concept taken from Wikidata. Concepts from Wikidata are used for geographical locations, temporal periods, and people (with the lowest priority if another authority can specify the same information).</p>
			</section>
		$elif name.isnumeric():
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external record taken from Geonames. Records from Geonames are used for geographical locations.</p>
			</section>
		$elif name.startswith("viaf"):
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external record taken from VIAF. Records from VIAF are used for people.</p>
			</section>
		$elif name.startswith("tadirah"):
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external concept taken from TaDiRAH. Concepts from TaDiRAH are used to categorize research activities, both activities within a research project and activities made available to end users by a digital scholary object.</p>
			</section>
		$elif name.startswith("ad-"):
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external concept taken from the Scientific Disciplinary Sector vocabulary. Concepts from this vocabulary are used for academic disciplines within the Italian context.</p>
			</section>
		$elif name.startswith("lc-"):
			<section class="biblio">
			<h3 class="biblio-label">External Concept</h3>
			<p>This page represents an external concept taken from the Licenze vocabulary. Concepts from this vocabulary are used for licenses.</p>
			</section>
	</section>
	<hr/>
</section>
